# goNES - Golang for the NES

goNES allows you to write programs for the Nintendo Entertainment System (NES).

Benefits of writing console programs in Golang:

- Code autocompletion support in IDEs
- You can debug the code directly from an IDE, goNES has an Emulator built in (right now rather simple) 
- Built in support for unit testing your code
- Simple code documentation generation 

## Installation

Go get the cmd to be able to compile your Go code to a .nes file.

Install cc65, it is used for generating the .nes file from assembly output generated by goNES.

See one of the examples on how to write code for the NES!

## GUI

The integrated OpenGL GUI support is enabled by default. To select the GUI module,
the following build flags can be set:

* `nogui`: disables all GUI modules
* `noopengl` disables the OpenGL GUI
* `sdl` enables the SDL GUI

The following libraries need to be installed, 
depending on the operating system:

`macOS`: Xcode or Command Line Tools for Xcode (xcode-select --install)

`Ubuntu/Debian-like`: build-essential libgl1-mesa-dev xorg-dev

`CentOS/Fedora-like`: @development-tools libX11-devel libXcursor-devel libXrandr-devel 
 libXinerama-devel mesa-libGL-devel libXi-devel libXxf86vm-devel

`Windows`:
  * Install [msys2](http://www.msys2.org/) 
  * Start msys2 and execute `pacman -S --needed base-devel mingw-w64-i686-toolchain  
    mingw-w64-x86_64-toolchain mingw64/mingw-w64-x86_64-SDL2`
  * Add `c:\tools\msys64\mingw64\bin\` to user path environment variable

## Compiling from Source

* Install the parser / scanner generator https://github.com/goccmack/gocc
* Run `make generate` to regenerate the code parser 

## Differences / Limitations

* `return` has to be used instead of `rts`
* `goto` has to be used instead of `jump` - it is limited to the labels in the
  current function as jump target
* instructions that accept immediate addressing and zero page,
  addressing mode have an alias function for the addressing mode, for example:
  `Lda(i uint8)` and `LdaAddr(address interface{}, reg ...interface{}`
